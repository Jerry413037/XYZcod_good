#include "SL811HS_1.h"
#include "ht32.h"
#include "Delay.h"
#include "Descr_1.h"
void Get_ctl_length_1(void)
{
	Get_Descriptor_1(0x80,0x06,0x00,0x01,0x00,0x00,0x08,0x00);		//get device Descriptor
}
void DEVICE_Descriptor_1(void)
{
	Get_Descriptor_1(0x80,0x06,0x00,0x01,0x00,0x00,0x12,0x00);		//get device Descriptor
}
void Config_Descriptor_1(void)
{
	Get_Descriptor_1(0x80,0x06,0x00,0x02,0x00,0x00,0x09,0x00);	//get Configuration Descriptor
	rd_host_1(0x32);												//get Configuration Descriptor TotalLength:
	Get_Descriptor_1(0x80,0x06,0x00,0x02,0x00,0x00,host_data_1,0x00);
}
void Set_Config_1(void)
{
	setuppackage_1(0x00,0x09,0x01,0x00,0x00,0x00,0x00,0x00,deviceaddr_1);	//set config
	inpackage_1(0x30,0,deviceaddr_1,data1);
}
void String_Descriptor_1(void)
{
	Get_Descriptor_1(0x80,0x06,0x02,0x03,0x09,0x04,0x04,0x00);		//get String iProduct
	Get_Descriptor_1(0x80,0x06,0x02,0x03,0x09,0x04,0x2A,0x00);		//get String iProduct
	Get_Descriptor_1(0x80,0x06,0x02,0x03,0x09,0x04,0x04,0x00);		//get String iProduct
	Get_Descriptor_1(0x80,0x06,0x02,0x03,0x09,0x04,0x2A,0x00);		//get String iProduct
}
void Set_Idle_1(unsigned char Id,unsigned char Len)
{
	setuppackage_1(0x21,0x0A,0x00,0x00,Id,0x00,0x00,0x00,deviceaddr_1);	//Set Idle
	inpackage_1(0x30,0,deviceaddr_1,data1);
	
	Get_Descriptor_1(0x81,0x06,0x00,0x22,Id,0x00,Len,0x00);		//Get Report
}

int Get_HID_data_Z(void)
{
	int i=0,z=0;
	char z_data;
	while(1)
	{
		endpoint_1=HID_IN_endpoint_1;
		//endpoint = 2;
		for(i=0;i<64;i++)
			wr_host_1(0x30+i,0);

		inpackage_1(0x30,0x40,deviceaddr_1,data0);//0x40  64 byte
	
		rd_host_1(61+0x30);  //point count	
		z=host_data_1/1;
	
		if(z==1)
		{
			break;
		}
		else if(z==2)
		{
			break;
		}
	}
	return z-1;
}
